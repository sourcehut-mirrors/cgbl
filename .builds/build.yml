# SPDX-FileCopyrightText: 2025 David Jolly <jolly.a.david@gmail.com>
# SPDX-License-Identifier: MIT

image: archlinux
packages:
  - clang
  - gcc
  - readline
  - sdl2
  - sdl3
sources:
  - https://git.sr.ht/~dajolly/cgbl
environment:
  BUILD_SUBMITTER: git.sr.ht
tasks:
  - build-clang-sdl2: |
      cd cgbl && make clean && make CC=clang CLIENT=sdl2
  - build-clang-sdl3: |
      cd cgbl && make clean && make CC=clang CLIENT=sdl3
  - build-gcc-sdl2: |
      cd cgbl && make clean && make CC=gcc CLIENT=sdl2
  - build-gcc-sdl3: |
      cd cgbl && make clean && make CC=gcc CLIENT=sdl3
triggers:
  - action: email
    condition: failure
    to: David Jolly <jolly.a.david@gmail.com>
